<!doctype html><html dir=ltr lang=ko data-theme class=html><head><title>Keunreol Park</title><meta charset=utf-8><meta name=generator content="Hugo 0.104.2"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Keunreol Park"><meta name=description content><link rel=stylesheet href=/scss/main.min.b2e0cb07595e3519ab1193bb421914e06c0e26b0cc561fef23b3c6131d4d2ffa.css integrity="sha256-suDLB1leNRmrEZO7QhkU4GwOJrDMVh/vI7PGEx1NL/o=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.d611411edd3b51c8a7523f2c4ef28371022d09c32452588fe139a62da18c3815.css integrity="sha256-1hFBHt07UcinUj8sTvKDcQItCcMkUliP4TmmLaGMOBU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&family=Roboto&display=swap" rel=stylesheet><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=https://ritter4u.github.io/post/design-pattern/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-flyweight-pattern-copy/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.738c0e3a493854876aeab9e2316fd43f1936aeeac4cc6b3e60bb26456dba72ad.js integrity="sha256-c4wOOkk4VIdq6rniMW/UPxk2rurEzGs+YLsmRW26cq0=" crossorigin=anonymous></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ritter4u.github.io/images/site-feature-image.png"><meta name=twitter:title content><meta name=twitter:description content="Flyweight pattern is primarily used to reduce the number of objects created and to decrease memory footprint and increase performance."><meta property="og:title" content><meta property="og:description" content="Flyweight pattern is primarily used to reduce the number of objects created and to decrease memory footprint and increase performance."><meta property="og:type" content="article"><meta property="og:url" content="https://ritter4u.github.io/post/design-pattern/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-flyweight-pattern-copy/"><meta property="og:image" content="https://ritter4u.github.io/images/site-feature-image.png"><meta property="article:section" content="post"><meta property="og:site_name" content="Keunreol Park"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"","headline":"","alternativeHeadline":"","description":"
      
        Flyweight pattern is primarily used to reduce the number of objects created and to decrease memory footprint and increase performance.


      


    ","inLanguage":"ko","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/ritter4u.github.io\/post\/design-pattern\/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-flyweight-pattern-copy\/"},"author":{"@type":"Person","name":"Keunreol Park"},"creator":{"@type":"Person","name":"Keunreol Park"},"accountablePerson":{"@type":"Person","name":"Keunreol Park"},"copyrightHolder":{"@type":"Person","name":"Keunreol Park"},"copyrightYear":"0001","dateCreated":"0001-01-01T00:00:00.00Z","datePublished":"0001-01-01T00:00:00.00Z","dateModified":"0001-01-01T00:00:00.00Z","publisher":{"@type":"Organization","name":"Keunreol Park","url":"https://ritter4u.github.io","logo":{"@type":"ImageObject","url":"https:\/\/ritter4u.github.io\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://ritter4u.github.io/images/site-feature-image.png"],"url":"https:\/\/ritter4u.github.io\/post\/design-pattern\/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-flyweight-pattern-copy\/","wordCount":"834","genre":[],"keywords":[]}</script></head><body class="body theme--light"><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/Imperial_Seal_of_the_Korean_Empire.svg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Keunreol Park</a></div><div class=sidebar__introduction-description><p></p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/ritter4u/ target=_blank rel=noopener aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Keunreol Park
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YP8PLL40SK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YP8PLL40SK",{anonymize_ip:!1})}</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/categories/ title>Categories</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=/series/ title>Series</a></li><li class=nav__list-item><a href=/tags/ title>Tags</a></li><li class=nav__list-item><a href=/portfolio/ title>프로젝트 수행 이력</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1></h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>1/1/0001</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>읽는 시간 4분</span></li></ul><hr><p>Flyweight pattern is primarily used to reduce the number of objects created and to decrease memory footprint and increase performance. This type of design pattern comes under structural pattern as this pattern provides ways to decrease object count thus improving the object structure of application.</p><p>Flyweight pattern tries to reuse already existing similar kind objects by storing them and creates new object when no matching object is found. We will demonstrate this pattern by drawing 20 circles of different locations but we will create only 5 objects. Only 5 colors are available so color property is used to check already existing <em>Circle</em> objects.</p><h2 id=implementation>Implementation</h2><p>We are going to create a <em>Shape</em> interface and concrete class <em>Circle</em> implementing the <em>Shape</em> interface. A factory class <em>ShapeFactory</em> is defined as a next step.</p><p><em>ShapeFactory</em> has a <em>HashMap</em> of <em>Circle</em> having key as color of the <em>Circle</em> object. Whenever a request comes to create a circle of particular color to <em>ShapeFactory</em>, it checks the circle object in its <em>HashMap</em>, if object of <em>Circle</em> found, that object is returned otherwise a new object is created, stored in hashmap for future use, and returned to client.</p><p><em>FlyWeightPatternDemo</em>, our demo class, will use <em>ShapeFactory</em> to get a <em>Shape</em> object. It will pass information (<em>red / green / blue/ black / white</em>) to <em>ShapeFactory</em> to get the circle of desired color it needs.</p><p><img src=https://www.tutorialspoint.com/design_pattern/images/flyweight_pattern_uml_diagram.jpg alt="Flyweight Pattern UML Diagram"></p><h2 id=step-1>Step 1</h2><p>Create an interface.</p><p><em>Shape.java</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>public interface Shape {
</span></span><span class=line><span class=ln>2</span><span class=cl>   void draw();
</span></span><span class=line><span class=ln>3</span><span class=cl>}
</span></span></code></pre></div><h2 id=step-2>Step 2</h2><p>Create concrete class implementing the same interface.</p><p><em>Circle.java</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>public class Circle implements Shape {
</span></span><span class=line><span class=ln> 2</span><span class=cl>   private String color;
</span></span><span class=line><span class=ln> 3</span><span class=cl>   private int x;
</span></span><span class=line><span class=ln> 4</span><span class=cl>   private int y;
</span></span><span class=line><span class=ln> 5</span><span class=cl>   private int radius;
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>   public Circle(String color){
</span></span><span class=line><span class=ln> 8</span><span class=cl>      this.color = color;
</span></span><span class=line><span class=ln> 9</span><span class=cl>   }
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>   public void setX(int x) {
</span></span><span class=line><span class=ln>12</span><span class=cl>      this.x = x;
</span></span><span class=line><span class=ln>13</span><span class=cl>   }
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>   public void setY(int y) {
</span></span><span class=line><span class=ln>16</span><span class=cl>      this.y = y;
</span></span><span class=line><span class=ln>17</span><span class=cl>   }
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>   public void setRadius(int radius) {
</span></span><span class=line><span class=ln>20</span><span class=cl>      this.radius = radius;
</span></span><span class=line><span class=ln>21</span><span class=cl>   }
</span></span><span class=line><span class=ln>22</span><span class=cl>
</span></span><span class=line><span class=ln>23</span><span class=cl>   @Override
</span></span><span class=line><span class=ln>24</span><span class=cl>   public void draw() {
</span></span><span class=line><span class=ln>25</span><span class=cl>      System.out.println(&#34;Circle: Draw() [Color : &#34; + color + &#34;, x : &#34; + x + &#34;, y :&#34; + y + &#34;, radius :&#34; + radius);
</span></span><span class=line><span class=ln>26</span><span class=cl>   }
</span></span><span class=line><span class=ln>27</span><span class=cl>}
</span></span></code></pre></div><h2 id=step-3>Step 3</h2><p>Create a factory to generate object of concrete class based on given information.</p><p><em>ShapeFactory.java</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>import java.util.HashMap;
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl>public class ShapeFactory {
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>   // Uncomment the compiler directive line and
</span></span><span class=line><span class=ln> 6</span><span class=cl>   // javac *.java will compile properly.
</span></span><span class=line><span class=ln> 7</span><span class=cl>   // @SuppressWarnings(&#34;unchecked&#34;)
</span></span><span class=line><span class=ln> 8</span><span class=cl>   private static final HashMap circleMap = new HashMap();
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>   public static Shape getCircle(String color) {
</span></span><span class=line><span class=ln>11</span><span class=cl>      Circle circle = (Circle)circleMap.get(color);
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>      if(circle == null) {
</span></span><span class=line><span class=ln>14</span><span class=cl>         circle = new Circle(color);
</span></span><span class=line><span class=ln>15</span><span class=cl>         circleMap.put(color, circle);
</span></span><span class=line><span class=ln>16</span><span class=cl>         System.out.println(&#34;Creating circle of color : &#34; + color);
</span></span><span class=line><span class=ln>17</span><span class=cl>      }
</span></span><span class=line><span class=ln>18</span><span class=cl>      return circle;
</span></span><span class=line><span class=ln>19</span><span class=cl>   }
</span></span><span class=line><span class=ln>20</span><span class=cl>}
</span></span></code></pre></div><h2 id=step-4>Step 4</h2><p>Use the factory to get object of concrete class by passing an information such as color.</p><p><em>FlyweightPatternDemo.java</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>public class FlyweightPatternDemo {
</span></span><span class=line><span class=ln> 2</span><span class=cl>   private static final String colors[] = { &#34;Red&#34;, &#34;Green&#34;, &#34;Blue&#34;, &#34;White&#34;, &#34;Black&#34; };
</span></span><span class=line><span class=ln> 3</span><span class=cl>   public static void main(String[] args) {
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>      for(int i=0; i &lt; 20; ++i) {
</span></span><span class=line><span class=ln> 6</span><span class=cl>         Circle circle = (Circle)ShapeFactory.getCircle(getRandomColor());
</span></span><span class=line><span class=ln> 7</span><span class=cl>         circle.setX(getRandomX());
</span></span><span class=line><span class=ln> 8</span><span class=cl>         circle.setY(getRandomY());
</span></span><span class=line><span class=ln> 9</span><span class=cl>         circle.setRadius(100);
</span></span><span class=line><span class=ln>10</span><span class=cl>         circle.draw();
</span></span><span class=line><span class=ln>11</span><span class=cl>      }
</span></span><span class=line><span class=ln>12</span><span class=cl>   }
</span></span><span class=line><span class=ln>13</span><span class=cl>   private static String getRandomColor() {
</span></span><span class=line><span class=ln>14</span><span class=cl>      return colors[(int)(Math.random()*colors.length)];
</span></span><span class=line><span class=ln>15</span><span class=cl>   }
</span></span><span class=line><span class=ln>16</span><span class=cl>   private static int getRandomX() {
</span></span><span class=line><span class=ln>17</span><span class=cl>      return (int)(Math.random()*100 );
</span></span><span class=line><span class=ln>18</span><span class=cl>   }
</span></span><span class=line><span class=ln>19</span><span class=cl>   private static int getRandomY() {
</span></span><span class=line><span class=ln>20</span><span class=cl>      return (int)(Math.random()*100);
</span></span><span class=line><span class=ln>21</span><span class=cl>   }
</span></span><span class=line><span class=ln>22</span><span class=cl>}
</span></span></code></pre></div><h2 id=step-5>Step 5</h2><p>Verify the output.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>Creating circle of color : Black
</span></span><span class=line><span class=ln> 2</span><span class=cl>Circle: Draw() [Color : Black, x : 36, y :71, radius :100
</span></span><span class=line><span class=ln> 3</span><span class=cl>Creating circle of color : Green
</span></span><span class=line><span class=ln> 4</span><span class=cl>Circle: Draw() [Color : Green, x : 27, y :27, radius :100
</span></span><span class=line><span class=ln> 5</span><span class=cl>Creating circle of color : White
</span></span><span class=line><span class=ln> 6</span><span class=cl>Circle: Draw() [Color : White, x : 64, y :10, radius :100
</span></span><span class=line><span class=ln> 7</span><span class=cl>Creating circle of color : Red
</span></span><span class=line><span class=ln> 8</span><span class=cl>Circle: Draw() [Color : Red, x : 15, y :44, radius :100
</span></span><span class=line><span class=ln> 9</span><span class=cl>Circle: Draw() [Color : Green, x : 19, y :10, radius :100
</span></span><span class=line><span class=ln>10</span><span class=cl>Circle: Draw() [Color : Green, x : 94, y :32, radius :100
</span></span><span class=line><span class=ln>11</span><span class=cl>Circle: Draw() [Color : White, x : 69, y :98, radius :100
</span></span><span class=line><span class=ln>12</span><span class=cl>Creating circle of color : Blue
</span></span><span class=line><span class=ln>13</span><span class=cl>Circle: Draw() [Color : Blue, x : 13, y :4, radius :100
</span></span><span class=line><span class=ln>14</span><span class=cl>Circle: Draw() [Color : Green, x : 21, y :21, radius :100
</span></span><span class=line><span class=ln>15</span><span class=cl>Circle: Draw() [Color : Blue, x : 55, y :86, radius :100
</span></span><span class=line><span class=ln>16</span><span class=cl>Circle: Draw() [Color : White, x : 90, y :70, radius :100
</span></span><span class=line><span class=ln>17</span><span class=cl>Circle: Draw() [Color : Green, x : 78, y :3, radius :100
</span></span><span class=line><span class=ln>18</span><span class=cl>Circle: Draw() [Color : Green, x : 64, y :89, radius :100
</span></span><span class=line><span class=ln>19</span><span class=cl>Circle: Draw() [Color : Blue, x : 3, y :91, radius :100
</span></span><span class=line><span class=ln>20</span><span class=cl>Circle: Draw() [Color : Blue, x : 62, y :82, radius :100
</span></span><span class=line><span class=ln>21</span><span class=cl>Circle: Draw() [Color : Green, x : 97, y :61, radius :100
</span></span><span class=line><span class=ln>22</span><span class=cl>Circle: Draw() [Color : Green, x : 86, y :12, radius :100
</span></span><span class=line><span class=ln>23</span><span class=cl>Circle: Draw() [Color : Green, x : 38, y :93, radius :100
</span></span><span class=line><span class=ln>24</span><span class=cl>Circle: Draw() [Color : Red, x : 76, y :82, radius :100
</span></span><span class=line><span class=ln>25</span><span class=cl>Circle: Draw() [Color : Blue, x : 95, y :82, radius :100
</span></span></code></pre></div></div><div class=post__footer></div><div id=comment><h2>댓글</h2><script src=https://utteranc.es/client.js repo=ritter4u/ritter4u.github.io issue-term=pathname theme=preferred-color-scheme label=comments crossorigin=anonymous async></script></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Keunreol Park
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css integrity=sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js integrity=sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js integrity=sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YP8PLL40SK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YP8PLL40SK",{anonymize_ip:!1})}</script></body></html>